<div class="tab attacks" data-group="primary" data-tab="attacks">
  <div class="form-grid">
    <div class="form-group dark-form-group">
      {{#if (eq system.sinType "redacted")}}
        <label for="system.complications"><strong>Complications:</strong></label>
        <textarea class="styled-textarea" name="system.complications">{{system.complications}}</textarea>
      {{else}}
        <p class="styled-paragraph"><strong>Complications:</strong> {{system.complications}}</p>
      {{/if}}
    </div>
    <div class="form-group dark-form-group">
      {{#if (eq system.sinType "redacted")}}
        <label for="system.threats"><strong>Threats:</strong></label>
        <textarea class="styled-textarea" name="system.threats">{{system.threats}}</textarea>
      {{else}}
        <p class="styled-paragraph"><strong>Threats:</strong> {{system.threats}}</p>
      {{/if}}
    </div>
  </div>
  <div class="form-group dark-form-group collapsible">
    <button class="collapsible-button" onclick="toggleCollapse(this)">Attacks and Severe Attacks</button>
    <div class="collapsible-content">
      {{#if (eq system.sinType "redacted")}}
        <textarea class="styled-textarea" name="system.severeAttack.description">{{system.severeAttack.description}}</textarea>
      {{else}}
        <p class="styled-paragraph">{{system.severeAttack.description}}</p>
      {{/if}}
      <div class="button-group">
        <button class="attack-button">Attack</button>
        <button class="severe-attack-button">Severe Attack</button>
      </div>
    </div>
  </div>
  <div class="form-group dark-form-group">
    <label for="system.afflictions" class="centered-label">Afflictions</label>
    <table class="afflictions-table">
      <thead>
        <tr>
          <th>Affliction</th>
        </tr>
      </thead>
      <tbody>
        {{#each system.afflictions}}
          <tr>
            {{#if (eq ../system.sinType "redacted")}}
              <td><input type="text" class="styled-input" name="system.afflictions.{{@index}}" value="{{this}}" /></td>
            {{else}}
              <td>{{this}}</td>
            {{/if}}
          </tr>
        {{/each}}
      </tbody>
    </table>
    <button class="roll-affliction">Roll Affliction</button>
  </div>
</div>

<script>
function toggleCollapse(button) {
  const content = button.nextElementSibling;
  if (content.style.display === "block") {
    content.style.display = "none";
  } else {
    content.style.display = "block";
  }
}
</script>

<style>
.tab.attacks {
  background-color: #1a1a1a;
  color: #f5f5f5;
  padding: 20px;
}

.tab.attacks .form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

.tab.attacks .form-group {
  margin-bottom: 20px;
  text-align: center;
}

.tab.attacks .dark-form-group {
  border: 1px solid #444;
  padding: 10px;
  border-radius: 4px;
  margin-bottom: 20px;
}

.tab.attacks .dark-form-group label {
  color: #f5f5f5;
  font-weight: bold;
  display: block;
  margin-bottom: 10px;
}

.tab.attacks .styled-paragraph {
  font-size: 1em;
  letter-spacing: 0.05em;
  margin-bottom: 20px;
}

.tab.attacks .styled-input, .tab.attacks .styled-textarea {
  width: 100%;
  padding: 10px;
  border: 1px solid #444;
  border-radius: 4px;
  background-color: #333;
  color: #f5f5f5;
}

.tab.attacks .button-group {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 20px;
}

.tab.attacks .attack-button, .tab.attacks .severe-attack-button {
  padding: 10px 20px;
  background-color: #444;
  color: #f5f5f5;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  width: auto; /* Adjust button width */
}

.tab.attacks .attack-button:hover, .tab.attacks .severe-attack-button:hover {
  background-color: #ff5555; /* Red hover color */
}

.tab.attacks .afflictions-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

.tab.attacks .afflictions-table th, .tab.attacks .afflictions-table td {
  border: 1px solid #444;
  padding: 8px;
  text-align: left;
}

.tab.attacks .afflictions-table th {
  background-color: #444;
  color: #f5f5f5;
}

.tab.attacks .afflictions-table td {
  background-color: #333;
  color: #f5f5f5;
}

.tab.attacks .roll-affliction {
  margin-top: 10px;
  padding: 10px 20px;
  background-color: #444;
  color: #f5f5f5;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.tab.attacks .roll-affliction:hover {
  background-color: #ff5555; /* Red hover color */
}

.tab.attacks .collapsible {
  border: 1px solid #444;
  border-radius: 4px;
  padding: 10px;
}

.tab.attacks .collapsible-button {
  background-color: #444;
  color: #f5f5f5;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  padding: 10px 20px;
  width: 100%;
  text-align: left;
}

.tab.attacks .collapsible-button:hover {
  background-color: #ff5555; /* Red hover color */
}

.tab.attacks .collapsible-content {
  display: none;
  padding: 10px;
  border-top: 1px solid #444;
}

form .tab.attacks .form-group {
  display: block;
  margin-bottom: 20px;
}
</style>